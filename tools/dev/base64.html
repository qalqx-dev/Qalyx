<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Base64 | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">‚Üê</a><h2>BASE64 CRYPT</h2></div>
    <div class="container">
        
        <div style="display:flex; gap:10px; margin-bottom:15px;">
            <button onclick="toggleMode('txt')" class="mode-btn active" id="btnTxt">TEXT</button>
            <button onclick="toggleMode('img')" class="mode-btn" id="btnImg">IMAGE</button>
        </div>

        <div id="textMode">
            <textarea id="inp" placeholder="Type here..." style="height:100px; font-family:monospace;"></textarea>
            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:10px; margin-bottom:15px;">
                <button onclick="process('enc')">ENCODE üîí</button>
                <button onclick="process('dec')" style="background:#333;">DECODE üîì</button>
            </div>
        </div>

        <div id="imgMode" style="display:none;">
            <input type="file" id="fileIn" accept="image/*" onchange="imgToBase64()">
            <div style="font-size:0.8rem; color:#666; margin-bottom:10px;">Select an image to convert to Base64 String</div>
        </div>

        <label>Result Output</label>
        <textarea id="out" readonly style="height:150px; background:#111; border:1px solid var(--primary); color:var(--primary); font-family:monospace; font-size:0.8rem;"></textarea>
        
        <div style="display:grid; grid-template-columns: 3fr 1fr; gap:10px;">
            <button onclick="copy()" style="background:#222; border:1px solid #444;">COPY RESULT</button>
            <button onclick="clr()" style="background:#FF4500;">X</button>
        </div>

    </div>

    <script>
        function toggleMode(m) {
            document.getElementById('textMode').style.display = m==='txt'?'block':'none';
            document.getElementById('imgMode').style.display = m==='img'?'block':'none';
            document.getElementById('btnTxt').classList.toggle('active', m==='txt');
            document.getElementById('btnImg').classList.toggle('active', m==='img');
            clr();
        }

        function process(action) {
            let val = document.getElementById('inp').value;
            try {
                if(action === 'enc') document.getElementById('out').value = btoa(val);
                else document.getElementById('out').value = atob(val);
            } catch(e) {
                document.getElementById('out').value = "Error: Invalid Input String";
            }
        }

        function imgToBase64() {
            const file = document.getElementById('fileIn').files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onloadend = () => {
                document.getElementById('out').value = reader.result;
            };
            reader.readAsDataURL(file);
        }

        function copy() {
            navigator.clipboard.writeText(document.getElementById('out').value);
            alert("Copied!");
        }

        function clr() {
            document.getElementById('inp').value = "";
            document.getElementById('out').value = "";
            document.getElementById('fileIn').value = "";
        }
    </script>
</body>
</html>
