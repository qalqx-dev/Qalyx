<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Geo | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        .shape-preview {
            width: 100%; height: 150px; background: rgba(0,0,0,0.3); border-radius: 12px;
            display: flex; align-items: center; justify-content: center; margin-bottom: 20px;
            border: 1px dashed var(--border);
        }
        svg { width: 100px; height: 100px; stroke: var(--primary); stroke-width: 2; fill: rgba(0, 229, 255, 0.1); transition: all 0.5s; }
        .formula-tag { font-family: monospace; background: #222; padding: 5px 10px; border-radius: 4px; color: #aaa; font-size: 0.8rem; text-align: center; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">←</a><h2>GEO ENGINE</h2></div>
    <div class="container">
        
        <div class="shape-preview" id="preview">
            </div>

        <select id="shape" onchange="renderUI()" style="margin-bottom:10px;">
            <option value="circle">Circle</option>
            <option value="sphere">Sphere</option>
            <option value="cylinder">Cylinder</option>
            <option value="cube">Cube</option>
            <option value="cone">Cone</option>
        </select>

        <div class="formula-tag" id="formula">A = πr²</div>

        <div id="inputs">
            </div>

        <div class="result-box">
            <div style="font-size:0.9rem; color:#aaa;">Calculated Result</div>
            <div id="res" style="font-size:2.5rem; font-weight:bold; color:var(--primary);">0</div>
        </div>

    </div>

    <script>
        const shapes = {
            circle: { form: "Area = πr²", inputs: ["Radius (r)"], svg: '<circle cx="50" cy="50" r="40"/>' },
            sphere: { form: "Vol = 4/3 πr³", inputs: ["Radius (r)"], svg: '<circle cx="50" cy="50" r="40"/><path d="M10,50 Q50,90 90,50" fill="none" stroke-dasharray="4"/><path d="M10,50 Q50,10 90,50" fill="none"/>' },
            cylinder: { form: "Vol = πr²h", inputs: ["Radius (r)", "Height (h)"], svg: '<ellipse cx="50" cy="15" rx="30" ry="10"/><path d="M20,15 L20,85"/><path d="M80,15 L80,85"/><ellipse cx="50" cy="85" rx="30" ry="10"/>' },
            cube: { form: "Vol = a³", inputs: ["Side (a)"], svg: '<rect x="25" y="35" width="50" height="50"/><path d="M25,35 L40,20 L90,20 L75,35"/><path d="M90,20 L90,70 L75,85"/><path d="M40,20 L40,70 L25,85" stroke-dasharray="4"/>' },
            cone: { form: "Vol = 1/3 πr²h", inputs: ["Radius (r)", "Height (h)"], svg: '<ellipse cx="50" cy="85" rx="40" ry="10"/><path d="M10,85 L50,5 L90,85"/>' }
        };

        function renderUI() {
            const s = document.getElementById('shape').value;
            const data = shapes[s];
            
            // Update SVG & Formula
            document.getElementById('preview').innerHTML = `<svg viewBox="0 0 100 100">${data.svg}</svg>`;
            document.getElementById('formula').innerText = data.form;

            // Generate Inputs
            let html = "";
            data.inputs.forEach((label, i) => {
                html += `<label>${label}</label><input type="number" id="v${i}" oninput="solve()">`;
            });
            document.getElementById('inputs').innerHTML = html;
            document.getElementById('res').innerText = "0";
        }

        function solve() {
            const s = document.getElementById('shape').value;
            const v0 = parseFloat(document.getElementById('v0')?.value) || 0;
            const v1 = parseFloat(document.getElementById('v1')?.value) || 0;
            let ans = 0;

            if(s === 'circle') ans = Math.PI * v0 * v0;
            if(s === 'sphere') ans = (4/3) * Math.PI * Math.pow(v0, 3);
            if(s === 'cylinder') ans = Math.PI * v0 * v0 * v1;
            if(s === 'cube') ans = Math.pow(v0, 3);
            if(s === 'cone') ans = (1/3) * Math.PI * v0 * v0 * v1;

            document.getElementById('res').innerText = parseFloat(ans.toFixed(2));
        }

        renderUI(); // Init
    </script>
</body>
</html>
