<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BMI | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        /* METER ENGINE */
        .meter-container { margin: 20px 0; position: relative; padding-top: 10px; }
        .meter-bar {
            height: 15px; width: 100%; border-radius: 10px;
            background: linear-gradient(90deg, #00E5FF 0%, #00FF7F 35%, #FFD700 65%, #FF4500 100%);
            box-shadow: 0 0 10px rgba(255,255,255,0.1);
        }
        .needle {
            width: 4px; height: 25px; background: #fff;
            position: absolute; top: 5px; left: 0%; /* Dynamic */
            transform: translateX(-50%);
            box-shadow: 0 0 10px #fff; border-radius: 2px;
            transition: left 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        .labels { display: flex; justify-content: space-between; font-size: 0.7rem; color: #666; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">‚Üê</a><h2>BMI INDEX</h2></div>
    <div class="container">
        
        <div style="text-align:center;">
            <div id="bmiVal" style="font-size:4rem; font-weight:bold; color:#fff;">0.0</div>
            <div id="status" style="color:var(--primary); letter-spacing:2px; font-weight:bold;">WAITING</div>
        </div>

        <div class="meter-container">
            <div class="needle" id="needle"></div>
            <div class="meter-bar"></div>
            <div class="labels">
                <span>Under</span><span>Normal</span><span>Over</span><span>Obese</span>
            </div>
        </div>

        <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px; margin-top:30px;">
            <div>
                <label>Weight (kg)</label>
                <input type="number" id="w" placeholder="kg" oninput="calc()">
            </div>
            <div>
                <label>Height (cm)</label>
                <input type="number" id="h" placeholder="cm" oninput="calc()">
            </div>
        </div>
        
        <div class="result-box" style="margin-top:20px;">
            <div style="font-size:0.9rem; color:#aaa;">Ideal Weight Range</div>
            <div id="ideal" style="font-size:1.2rem; color:#fff;">-</div>
        </div>
    </div>

    <script>
        function calc() {
            let w = parseFloat(document.getElementById('w').value);
            let h = parseFloat(document.getElementById('h').value);

            if(!w || !h) {
                document.getElementById('needle').style.left = "0%";
                return;
            }

            // Calculation
            let hM = h / 100; // Convert to meters
            let bmi = w / (hM * hM);
            let val = bmi.toFixed(1);

            document.getElementById('bmiVal').innerText = val;

            // Status Logic
            let status = "";
            let color = "";
            let percent = 0; // Position on bar (0-100)

            // Mapping BMI (15-40 range) to Percentage (0-100)
            // Min graph = 15 BMI, Max graph = 40 BMI
            percent = ((bmi - 15) / (40 - 15)) * 100;
            if(percent < 0) percent = 0;
            if(percent > 100) percent = 100;

            if (bmi < 18.5) { status = "UNDERWEIGHT"; color = "#00E5FF"; }
            else if (bmi < 25) { status = "NORMAL"; color = "#00FF7F"; }
            else if (bmi < 30) { status = "OVERWEIGHT"; color = "#FFD700"; }
            else { status = "OBESE"; color = "#FF4500"; }

            document.getElementById('status').innerText = status;
            document.getElementById('status').style.color = color;
            document.getElementById('needle').style.left = percent + "%";

            // Ideal Weight Calculation
            let minW = 18.5 * hM * hM;
            let maxW = 24.9 * hM * hM;
            document.getElementById('ideal').innerText = `${minW.toFixed(1)}kg - ${maxW.toFixed(1)}kg`;
        }
    </script>
</body>
</html>
