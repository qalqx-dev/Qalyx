<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Math | QALQX</title>
    <link rel="stylesheet" href="../../style.css">
    <style>
        /* Specific Layout for Calculator overrides global flex */
        body { justify-content: flex-end; height: 100vh; overflow: hidden; }
        
        .display {
            width: 100%; flex-grow: 1; background: #000;
            display: flex; flex-direction: column; justify-content: flex-end;
            padding: 20px; text-align: right; box-sizing: border-box;
        }
        #history { color: #666; font-size: 1.2rem; margin-bottom: 5px; min-height: 1.5rem; }
        #screen { color: #fff; font-size: 3.5rem; font-weight: bold; }

        .keypad {
            display: grid; grid-template-columns: repeat(4, 1fr);
            height: 60%; width: 100%; gap: 1px; background: #111;
        }
        /* Override global button style for keypad */
        .keypad button {
            margin: 0; padding: 0; border-radius: 0; background: #1A1A1A;
            font-size: 1.5rem; height: 100%;
        }
        .keypad button:active { background: #333; transform: none; }
        
        .op { color: var(--primary); background: #161616 !important; }
        .eq { background: var(--primary) !important; color: #000 !important; }
        .clear { color: #FF4500; }
    </style>
</head>
<body>
    <div class="nav" style="position:absolute; top:0;">
        <a href="../../index.html" class="back-btn">←</a>
        <h2>PRIME CALC</h2>
    </div>

    <div class="display">
        <div id="history"></div>
        <div id="screen">0</div>
    </div>

    <div class="keypad">
        <button class="clear" onclick="clearScreen()">AC</button>
        <button class="op" onclick="del()">⌫</button>
        <button class="op" onclick="append('%')">%</button>
        <button class="op" onclick="append('/')">÷</button>
        
        <button onclick="append('7')">7</button>
        <button onclick="append('8')">8</button>
        <button onclick="append('9')">9</button>
        <button class="op" onclick="append('*')">×</button>
        
        <button onclick="append('4')">4</button>
        <button onclick="append('5')">5</button>
        <button onclick="append('6')">6</button>
        <button class="op" onclick="append('-')">−</button>
        
        <button onclick="append('1')">1</button>
        <button onclick="append('2')">2</button>
        <button onclick="append('3')">3</button>
        <button class="op" onclick="append('+')">+</button>
        
        <button onclick="append('00')">00</button>
        <button onclick="append('0')">0</button>
        <button onclick="append('.')">.</button>
        <button class="eq" onclick="calculate()">=</button>
    </div>

    <script>
        let currentInput = "";
        let screen = document.getElementById('screen');
        let history = document.getElementById('history');

        function append(val) {
            if (currentInput === "" && (val === "*" || val === "/" || val === "%")) return;
            currentInput += val;
            screen.innerText = currentInput;
        }
        function clearScreen() { currentInput = ""; screen.innerText = "0"; history.innerText = ""; }
        function del() { currentInput = currentInput.slice(0, -1); screen.innerText = currentInput || "0"; }
        function calculate() {
            try {
                history.innerText = currentInput;
                let result = eval(currentInput); 
                screen.innerText = result;
                currentInput = result.toString();
            } catch (e) { screen.innerText = "Error"; currentInput = ""; }
        }
    </script>
</body>
</html>
