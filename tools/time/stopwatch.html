<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chrono | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        .time-wrapper {
            background: #000; border: 1px solid var(--border); border-radius: 20px;
            padding: 40px 0; text-align: center; margin-bottom: 20px;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.8);
        }
        .main-time { font-family: 'Courier New', monospace; font-size: 3.5rem; color: #fff; font-weight: bold; text-shadow: 0 0 10px var(--primary); }
        .ms-time { font-size: 1.5rem; color: var(--primary); }
        
        .controls { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .laps {
            max-height: 250px; overflow-y: auto; margin-top: 20px;
            border-top: 1px solid #333;
        }
        .lap-row {
            display: flex; justify-content: space-between; padding: 15px;
            border-bottom: 1px solid #222; font-family: monospace; color: #aaa;
        }
        .lap-row.fastest { color: #00FF7F; }
        .lap-row.slowest { color: #FF4500; }
        .lap-num { color: #555; }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">‚Üê</a><h2>CHRONO PRO</h2></div>
    <div class="container">
        
        <div class="time-wrapper">
            <span class="main-time" id="m">00</span><span class="main-time">:</span><span class="main-time" id="s">00</span>
            <div class="ms-time" id="ms">.00</div>
        </div>

        <div class="controls">
            <button onclick="toggle()" id="btnStart">START</button>
            <button onclick="lap()" style="background:#333; color:#fff;">LAP</button>
        </div>
        <button onclick="reset()" style="background:transparent; border:1px solid #FF4500; color:#FF4500;">RESET SYSTEM</button>

        <div class="laps" id="laps">
            </div>

    </div>

    <script>
        let startTime, updatedTime, difference, tInterval, running = false;
        let lapCounter = 1;

        function toggle() {
            if(!running) {
                startTime = new Date().getTime() - (difference || 0);
                tInterval = setInterval(update, 10);
                running = true;
                document.getElementById('btnStart').innerText = "PAUSE";
                document.getElementById('btnStart').style.background = "#FFD700";
                document.getElementById('btnStart').style.color = "#000";
            } else {
                clearInterval(tInterval);
                running = false;
                document.getElementById('btnStart').innerText = "RESUME";
                document.getElementById('btnStart').style.background = "var(--primary)";
            }
        }

        function update() {
            updatedTime = new Date().getTime();
            difference = updatedTime - startTime;
            
            let m = Math.floor((difference % (1000 * 60 * 60)) / (1000 * 60));
            let s = Math.floor((difference % (1000 * 60)) / 1000);
            let ms = Math.floor((difference % 1000) / 10);

            document.getElementById('m').innerText = (m < 10) ? "0" + m : m;
            document.getElementById('s').innerText = (s < 10) ? "0" + s : s;
            document.getElementById('ms').innerText = "." + ((ms < 10) ? "0" + ms : ms);
        }

        function lap() {
            if(running) {
                const timeStr = `${document.getElementById('m').innerText}:${document.getElementById('s').innerText}${document.getElementById('ms').innerText}`;
                const div = document.createElement('div');
                div.className = 'lap-row';
                div.innerHTML = `<span class="lap-num">#${lapCounter}</span> <span>${timeStr}</span>`;
                document.getElementById('laps').prepend(div);
                lapCounter++;
            }
        }

        function reset() {
            clearInterval(tInterval);
            running = false; difference = 0; lapCounter = 1;
            document.getElementById('m').innerText = "00";
            document.getElementById('s').innerText = "00";
            document.getElementById('ms').innerText = ".00";
            document.getElementById('btnStart').innerText = "START";
            document.getElementById('btnStart').style.background = "var(--primary)";
            document.getElementById('laps').innerHTML = "";
        }
    </script>
</body>
</html>
