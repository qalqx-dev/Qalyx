<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SysInfo | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        .hud-grid { display: grid; grid-template-columns: 1fr; gap: 15px; }
        
        .hud-card {
            background: rgba(30, 30, 30, 0.6); border: 1px solid var(--border);
            padding: 15px; border-radius: 12px; position: relative; overflow: hidden;
            display: flex; flex-direction: column; justify-content: space-between;
        }
        .hud-card::before {
            content: ""; position: absolute; left: 0; top: 0; bottom: 0; width: 4px;
            background: var(--primary);
        }
        
        .hud-label { font-size: 0.8rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .hud-val { font-size: 1.8rem; font-weight: bold; color: #fff; font-family: monospace; margin-top: 5px; }
        
        /* Battery Bar */
        .bar-bg { width: 100%; height: 8px; background: #333; border-radius: 4px; margin-top: 10px; overflow: hidden; }
        .bar-fill { height: 100%; background: var(--primary); width: 0%; transition: width 1s; }
        
        /* Network Pulse */
        .net-dot {
            width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 5px;
            box-shadow: 0 0 10px currentColor;
        }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">←</a><h2>SYSTEM HUD</h2></div>
    <div class="container">
        
        <div class="hud-grid">
            
            <div class="hud-card">
                <div class="hud-label">Power Core</div>
                <div style="display:flex; justify-content:space-between; align-items:flex-end;">
                    <div class="hud-val" id="battLevel">...</div>
                    <div id="chargeIcon" style="color:#00FF7F; font-size:0.8rem; display:none;">⚡ CHARGING</div>
                </div>
                <div class="bar-bg"><div class="bar-fill" id="battBar"></div></div>
            </div>

            <div class="hud-card" style="border-left-color: #00FF7F;">
                <div class="hud-label">Network Link</div>
                <div class="hud-val" id="netStatus" style="font-size:1.2rem;">Checking...</div>
                <div style="font-size:0.8rem; color:#666; margin-top:5px;" id="netType">Type: -</div>
            </div>

            <div style="display:grid; grid-template-columns: 1fr 1fr; gap:15px;">
                <div class="hud-card" style="border-left-color: #FFD700;">
                    <div class="hud-label">CPU Cores</div>
                    <div class="hud-val" id="cpuVal">-</div>
                </div>
                <div class="hud-card" style="border-left-color: #FF0055;">
                    <div class="hud-label">Memory</div>
                    <div class="hud-val" id="ramVal">-</div>
                </div>
            </div>

            <div class="hud-card" style="border-left-color: #9932CC;">
                <div class="hud-label">Display Matrix</div>
                <div class="hud-val" id="resVal" style="font-size:1.5rem;">-</div>
                <div style="font-size:0.8rem; color:#666;">Pixel Ratio: <span id="dpr"></span></div>
            </div>

        </div>
    </div>

    <script>
        // BATTERY
        if ('getBattery' in navigator) {
            navigator.getBattery().then(batt => {
                updateBatt(batt);
                batt.addEventListener('levelchange', () => updateBatt(batt));
                batt.addEventListener('chargingchange', () => updateBatt(batt));
            });
        } else {
            document.getElementById('battLevel').innerText = "N/A";
        }

        function updateBatt(batt) {
            let lvl = Math.round(batt.level * 100);
            document.getElementById('battLevel').innerText = lvl + "%";
            document.getElementById('battBar').style.width = lvl + "%";
            
            if(batt.charging) {
                document.getElementById('chargeIcon').style.display = "block";
                document.getElementById('battBar').style.background = "#00FF7F";
            } else if(lvl < 20) {
                document.getElementById('battBar').style.background = "#FF4500";
            }
        }

        // NETWORK
        function updateNet() {
            let on = navigator.onLine;
            let el = document.getElementById('netStatus');
            el.innerHTML = `<span class="net-dot" style="color:${on?'#00FF7F':'#FF4500'}"></span> ${on?'ONLINE':'OFFLINE'}`;
            
            if (navigator.connection) {
                document.getElementById('netType').innerText = `Est Speed: ${navigator.connection.downlink} Mbps`;
            }
        }
        window.addEventListener('online', updateNet);
        window.addEventListener('offline', updateNet);

        // HARDWARE
        document.getElementById('cpuVal').innerText = (navigator.hardwareConcurrency || "?");
        document.getElementById('ramVal').innerText = (navigator.deviceMemory ? "~"+navigator.deviceMemory+" GB" : "N/A");
        
        // SCREEN
        document.getElementById('resVal').innerText = `${window.screen.width} x ${window.screen.height}`;
        document.getElementById('dpr').innerText = window.devicePixelRatio + "x";

        updateNet();
    </script>
</body>
</html>
