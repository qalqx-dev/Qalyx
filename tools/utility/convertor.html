<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convert | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        .select-group {
            background: #111; padding: 5px; border-radius: 12px; border: 1px solid #333;
            margin-bottom: 20px;
        }
        select {
            background: transparent; border: none; font-size: 1rem; color: #fff;
            padding: 15px; margin: 0; width: 100%; outline: none;
        }
        
        .io-container {
            display: flex; flex-direction: column; gap: 15px; position: relative;
        }
        .swap-btn {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 40px; height: 40px; border-radius: 50%; background: var(--primary);
            color: #000; border: none; display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; cursor: pointer; box-shadow: 0 0 15px var(--primary); z-index: 10;
        }
        
        .input-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 12px; padding: 15px;
        }
        .unit-label { font-size: 0.8rem; color: #888; margin-bottom: 5px; text-transform: uppercase; }
        .val-display { 
            font-size: 1.8rem; font-weight: bold; color: var(--primary); 
            font-family: monospace; word-break: break-all;
        }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">←</a><h2>UNIT MASTER</h2></div>
    <div class="container">
        
        <div class="select-group">
            <select id="cat" onchange="updateUnits()">
                <option value="len">Length & Distance</option>
                <option value="mass">Weight & Mass</option>
                <option value="temp">Temperature</option>
                <option value="data">Data Storage</option>
                <option value="speed">Speed</option>
                <option value="time">Time</option>
            </select>
        </div>

        <div class="io-container">
            <div class="input-card">
                <div class="unit-label">From</div>
                <input type="number" id="valInput" placeholder="0" oninput="convert()" style="border:none; background:transparent; font-size:2rem; padding:0; margin:0; height:auto;">
                <select id="unitFrom" onchange="convert()" style="border-top:1px solid #333; margin-top:10px; padding-left:0; color:#aaa;"></select>
            </div>

            <button class="swap-btn" onclick="swap()">⇅</button>

            <div class="input-card" style="background:rgba(0, 229, 255, 0.05); border-color:var(--primary);">
                <div class="unit-label">To</div>
                <div class="val-display" id="valResult">0</div>
                <select id="unitTo" onchange="convert()" style="border-top:1px solid rgba(0,229,255,0.3); margin-top:10px; padding-left:0; color:#fff;"></select>
            </div>
        </div>

        <button onclick="copy()" style="background:#222; color:#fff; border:1px solid #444; margin-top:20px;">COPY RESULT</button>

    </div>

    <script>
        const factors = {
            len: { "Meter (m)": 1, "Kilometer (km)": 1000, "Centimeter (cm)": 0.01, "Millimeter (mm)": 0.001, "Mile (mi)": 1609.34, "Yard (yd)": 0.9144, "Foot (ft)": 0.3048, "Inch (in)": 0.0254 },
            mass: { "Gram (g)": 1, "Kilogram (kg)": 1000, "Milligram (mg)": 0.001, "Pound (lb)": 453.592, "Ounce (oz)": 28.3495 },
            data: { "Byte (B)": 1, "Kilobyte (KB)": 1024, "Megabyte (MB)": 1048576, "Gigabyte (GB)": 1073741824, "Terabyte (TB)": 1099511627776 },
            speed: { "m/s": 1, "km/h": 0.277778, "mph": 0.44704, "Knot": 0.514444 },
            time: { "Second": 1, "Minute": 60, "Hour": 3600, "Day": 86400, "Year": 31536000 },
            temp: { "Celsius": "C", "Fahrenheit": "F", "Kelvin": "K" }
        };

        function updateUnits() {
            const cat = document.getElementById('cat').value;
            const unitList = Object.keys(factors[cat]);
            const from = document.getElementById('unitFrom');
            const to = document.getElementById('unitTo');
            
            from.innerHTML = ""; to.innerHTML = "";
            unitList.forEach(u => {
                from.add(new Option(u, u));
                to.add(new Option(u, u));
            });
            // Defaults
            to.selectedIndex = 1;
            convert();
        }

        function convert() {
            const cat = document.getElementById('cat').value;
            let val = parseFloat(document.getElementById('valInput').value);
            const uFrom = document.getElementById('unitFrom').value;
            const uTo = document.getElementById('unitTo').value;
            const resBox = document.getElementById('valResult');

            if (isNaN(val)) { resBox.innerText = "0"; return; }

            if (cat === "temp") {
                resBox.innerText = convertTemp(val, uFrom, uTo);
                return;
            }

            const factorFrom = factors[cat][uFrom];
            const factorTo = factors[cat][uTo];
            let result = (val * factorFrom) / factorTo;

            if (result > 0 && (result < 0.001 || result > 10000)) resBox.innerText = result.toExponential(4);
            else resBox.innerText = parseFloat(result.toFixed(6));
        }

        function convertTemp(val, from, to) {
            let c = val;
            if (from === "Fahrenheit") c = (val - 32) * 5/9;
            if (from === "Kelvin") c = val - 273.15;
            if (to === "Celsius") return parseFloat(c.toFixed(2));
            if (to === "Fahrenheit") return parseFloat(((c * 9/5) + 32).toFixed(2));
            if (to === "Kelvin") return parseFloat((c + 273.15).toFixed(2));
        }

        function swap() {
            const f = document.getElementById('unitFrom');
            const t = document.getElementById('unitTo');
            const temp = f.value;
            f.value = t.value;
            t.value = temp;
            convert();
        }

        function copy() {
            navigator.clipboard.writeText(document.getElementById('valResult').innerText);
            alert("Copied!");
        }

        updateUnits();
    </script>
</body>
</html>
