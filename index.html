<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <title>QALQX | OS</title>
    <link rel="stylesheet" href="style.css">
    <link rel="manifest" href="manifest.json">
    <script src="app.js" defer></script>
    <style>
        :root {
            --dock-height: 70px;
            --sidebar-width: 80px;
            --safe-top: env(safe-area-inset-top, 20px);
            --safe-bottom: env(safe-area-inset-bottom, 20px);
        }

        body { 
            /* PC/TV Scroll Fix */
            overflow-y: auto; 
            padding-bottom: calc(var(--dock-height) + var(--safe-bottom) + 20px);
        }

        /* --- 1. ADAPTIVE HEADER (Notch Safe) --- */
        .header-section {
            padding: calc(var(--safe-top) + 15px) 25px 10px 25px;
            display: flex; justify-content: space-between; align-items: center;
        }
        .greet-box h1 { font-size: 2rem; margin: 0; background: linear-gradient(to right, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .greet-box p { font-size: 0.9rem; color: #666; margin: 2px 0 0 0; }

        /* --- 2. SEARCH (Sticky & Glass) --- */
        .search-container { 
            padding: 10px 20px; position: sticky; top: 0; z-index: 50; 
            background: rgba(5,5,5,0.9); backdrop-filter: blur(12px);
            /* Fix for desktop sidebar overlap */
            width: 100%;
        }
        .search-bar {
            background: #111; border: 1px solid #333; border-radius: 12px;
            display: flex; align-items: center; padding: 12px 20px;
            transition: 0.3s;
        }
        /* TV Remote Focus State */
        .search-bar:focus-within, .app-card:focus, .chip:focus { 
            border-color: var(--primary); box-shadow: 0 0 20px rgba(0, 229, 255, 0.3); outline: none;
        }
        .search-bar input { background: transparent; border: none; color: #fff; width: 100%; outline: none; font-size: 1rem; margin-left: 10px; }

        /* --- 3. CATEGORY CHIPS --- */
        .chips-wrapper {
            display: flex; gap: 10px; overflow-x: auto; padding: 10px 20px;
            scrollbar-width: none;
        }
        .chips-wrapper::-webkit-scrollbar { display: none; }
        .chip {
            background: #1a1a1a; color: #aaa; padding: 8px 18px; border-radius: 20px;
            font-size: 0.85rem; white-space: nowrap; border: 1px solid #333; cursor: pointer;
        }
        .chip.active { background: var(--primary); color: #000; border-color: var(--primary); font-weight: bold; }

        /* --- 4. RESPONSIVE GRID ENGINE --- */
        .app-grid {
            display: grid; 
            /* MAGIC LINE: Auto-fits columns based on screen width */
            grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); 
            gap: 12px; padding: 20px;
        }

        .app-card {
            background: var(--surface); border: 1px solid var(--border);
            border-radius: 16px; padding: 15px; display: flex; flex-direction: column;
            align-items: center; text-decoration: none; position: relative; overflow: hidden;
            aspect-ratio: 1 / 1; /* Perfect square on all devices */
            justify-content: center; transition: transform 0.2s, background 0.2s;
        }
        .app-card:hover { background: rgba(255,255,255,0.05); border-color: #666; }
        .icon-box { font-size: 2.5rem; margin-bottom: 8px; filter: drop-shadow(0 0 10px rgba(255,255,255,0.1)); }
        .app-name { font-size: 0.8rem; color: #ccc; font-weight: 500; text-align: center; }

        /* --- 5. ADAPTIVE DOCK / SIDEBAR --- */
        .dock {
            position: fixed; z-index: 100;
            background: rgba(20, 20, 20, 0.9); backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex; justify-content: space-around; align-items: center;
        }

        .dock-item {
            text-align: center; color: #888; text-decoration: none; font-size: 0.7rem;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            padding: 10px; border-radius: 8px; transition: 0.2s;
        }
        .dock-icon { font-size: 1.5rem; margin-bottom: 2px; }
        .dock-item:hover, .dock-item:focus { background: rgba(255,255,255,0.1); color: #fff; }
        .dock-item.active { color: var(--primary); }

        /* --- MEDIA QUERIES (The Brains) --- */

        /* A. MOBILE / FOLDED (Vertical Layout) */
        @media (max-width: 800px) {
            .dock {
                bottom: calc(20px + var(--safe-bottom)); 
                left: 50%; transform: translateX(-50%);
                width: 90%; max-width: 400px; height: var(--dock-height);
                border-radius: 40px; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            }
        }

        /* B. PC / TV / UNFOLDED TABLET (Sidebar Layout) */
        @media (min-width: 801px) {
            body {
                padding-left: var(--sidebar-width); /* Push content right */
                padding-bottom: 20px;
            }
            .dock {
                top: 0; left: 0; bottom: 0;
                width: var(--sidebar-width); height: 100vh;
                flex-direction: column; justify-content: center; gap: 30px;
                border-radius: 0; border-right: 1px solid #333; border-top: none; border-bottom: none; border-left: none;
            }
            .dock-item { font-size: 0.6rem; width: 100%; }
            .header-section, .search-container, .chips-wrapper, .app-grid {
                max-width: 1200px; margin: 0 auto; /* Center content on wide screens */
            }
        }

        /* C. TV MODE (Focus Indicators) */
        @media (hover: hover) {
            /* Better hover states for mouse users */
            .app-card:hover { transform: translateY(-5px); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        }
    </style>
</head>
<body>

    <nav class="dock">
        <a href="#" class="dock-item active">
            <div class="dock-icon">ğŸ </div>
            <span>Home</span>
        </a>
        <a href="tools/math/calc.html" class="dock-item">
            <div class="dock-icon">ğŸ§®</div>
            <span>Calc</span>
        </a>
        <a href="tools/productivity/notes.html" class="dock-item">
            <div class="dock-icon">ğŸ“</div>
            <span>Notes</span>
        </a>
        <a href="tools/utility/speed.html" class="dock-item">
            <div class="dock-icon">âš¡</div>
            <span>Net</span>
        </a>
        <a href="settings.html" class="dock-item">
            <div class="dock-icon">âš™ï¸</div>
            <span>Config</span>
        </a>
    </nav>

    <main>
        <div class="header-section">
            <div class="greet-box">
                <h1 id="greet">System Ready</h1>
                <p id="dateLine">Loading...</p>
            </div>
            <div style="text-align:right;">
                <div style="font-size:1.5rem;">ğŸ”‹ <span id="batLvl">--</span></div>
            </div>
        </div>

        <div class="search-container">
            <div class="search-bar">
                <span>ğŸ”</span>
                <input type="text" id="search" placeholder="Type command or search apps..." onkeyup="filterApps()">
            </div>
        </div>

        <div class="chips-wrapper">
            <div class="chip active" onclick="filterCat('all', this)">All Apps</div>
            <div class="chip" onclick="filterCat('prod', this)">Productivity</div>
            <div class="chip" onclick="filterCat('dev', this)">Developer</div>
            <div class="chip" onclick="filterCat('sci', this)">Science</div>
            <div class="chip" onclick="filterCat('life', this)">Life & Health</div>
            <div class="chip" onclick="filterCat('fun', this)">Arcade</div>
        </div>

        <div class="app-grid" id="mainGrid">
            
            <a href="tools/productivity/notes.html" class="app-card" data-cat="prod"><div class="icon-box">ğŸ“</div><div class="app-name">Notes</div></a>
            <a href="tools/productivity/todo.html" class="app-card" data-cat="prod"><div class="icon-box">âœ…</div><div class="app-name">Tasks</div></a>
            <a href="tools/productivity/focus.html" class="app-card" data-cat="prod"><div class="icon-box">ğŸ¯</div><div class="app-name">Focus</div></a>
            <a href="tools/time/stopwatch.html" class="app-card" data-cat="prod"><div class="icon-box">â±ï¸</div><div class="app-name">Timer</div></a>

            <a href="tools/utility/speed.html" class="app-card" data-cat="prod"><div class="icon-box">âš¡</div><div class="app-name">Speed</div></a>
            <a href="tools/utility/system.html" class="app-card" data-cat="prod"><div class="icon-box">ğŸ“±</div><div class="app-name">System</div></a>
            <a href="tools/utility/converter.html" class="app-card" data-cat="prod"><div class="icon-box">âš–ï¸</div><div class="app-name">Units</div></a>
            <a href="tools/utility/compressor.html" class="app-card" data-cat="prod"><div class="icon-box">ğŸ“‰</div><div class="app-name">Shrink</div></a>

            <a href="tools/dev/base64.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ§¬</div><div class="app-name">Base64</div></a>
            <a href="tools/dev/color.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ¨</div><div class="app-name">Colors</div></a>
            <a href="tools/dev/ip.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸŒ</div><div class="app-name">IP Trace</div></a>
            <a href="tools/dev/qr.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ”³</div><div class="app-name">QR Gen</div></a>
            <a href="tools/dev/json.html" class="app-card" data-cat="dev"><div class="icon-box">âœ¨</div><div class="app-name">JSON</div></a>
            <a href="tools/dev/markdown.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ“</div><div class="app-name">Markdwn</div></a>
            <a href="tools/security/pass.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ”</div><div class="app-name">Pass</div></a>
            <a href="tools/security/hash.html" class="app-card" data-cat="dev"><div class="icon-box">ğŸ›¡ï¸</div><div class="app-name">Hash</div></a>

            <a href="tools/math/calc.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸ§®</div><div class="app-name">Calc</div></a>
            <a href="tools/math/quadratic.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸ“ˆ</div><div class="app-name">Solver</div></a>
            <a href="tools/science/periodic.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸ§ª</div><div class="app-name">Elements</div></a>
            <a href="tools/physics/ohms.html" class="app-card" data-cat="sci"><div class="icon-box">âš¡</div><div class="app-name">Ohms</div></a>
            <a href="tools/physics/kinetic.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸŒ </div><div class="app-name">Kinetic</div></a>
            <a href="tools/physics/force.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸš€</div><div class="app-name">Force</div></a>
            <a href="tools/physics/velocity.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸï¸</div><div class="app-name">Velocity</div></a>
            <a href="tools/student/geometry.html" class="app-card" data-cat="sci"><div class="icon-box">ğŸ“</div><div class="app-name">Geo</div></a>

            <a href="tools/age.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ‚</div><div class="app-name">Age</div></a>
            <a href="tools/finance/emi.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ¦</div><div class="app-name">EMI</div></a>
            <a href="tools/finance/discount.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ·ï¸</div><div class="app-name">Disc</div></a>
            <a href="tools/finance/tip.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ½ï¸</div><div class="app-name">Tip</div></a>
            <a href="tools/health/bmi.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ’ª</div><div class="app-name">BMI</div></a>
            <a href="tools/health/breath.html" class="app-card" data-cat="life"><div class="icon-box">ğŸ§˜</div><div class="app-name">Breath</div></a>

            <a href="tools/dev/meme.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ¸</div><div class="app-name">Meme</div></a>
            <a href="tools/utility/sketch.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ¨</div><div class="app-name">Sketch</div></a>
            <a href="tools/audio/recorder.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ™ï¸</div><div class="app-name">Rec</div></a>
            <a href="tools/game/spin.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ¡</div><div class="app-name">Wheel</div></a>
            <a href="tools/audio/tone.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ”Š</div><div class="app-name">Tone</div></a>
            <a href="tools/game/coin.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸª™</div><div class="app-name">Coin</div></a>
            <a href="tools/game/dice.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ²</div><div class="app-name">Dice</div></a>
            <a href="tools/audio/tts.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ¤–</div><div class="app-name">Voice</div></a>
            <a href="tools/audio/metro.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ¥</div><div class="app-name">Metro</div></a>
            <a href="tools/game/8ball.html" class="app-card" data-cat="fun"><div class="icon-box">ğŸ±</div><div class="app-name">Magic 8</div></a>
        </div>
    </main>

    <script>
        // 1. Live Time & Date
        function updateTime() {
            const now = new Date();
            const hr = now.getHours();
            const msg = hr < 12 ? "Good Morning" : hr < 18 ? "Good Afternoon" : "Good Evening";
            document.getElementById('greet').innerText = msg + ", Founder";
            
            const options = { weekday: 'long', month: 'long', day: 'numeric' };
            document.getElementById('dateLine').innerText = now.toLocaleDateString('en-US', options);
        }
        updateTime();

        // 2. Battery Status (Cool factor)
        if(navigator.getBattery) {
            navigator.getBattery().then(bat => {
                const updateBat = () => document.getElementById('batLvl').innerText = Math.round(bat.level * 100) + "%";
                updateBat();
                bat.addEventListener('levelchange', updateBat);
            });
        }

        // 3. Category Filter
        function filterCat(cat, btn) {
            document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            btn.classList.add('active');
            
            const cards = document.querySelectorAll('.app-card');
            cards.forEach(card => {
                if(cat === 'all' || card.getAttribute('data-cat') === cat) card.style.display = 'flex';
                else card.style.display = 'none';
            });
        }

        // 4. Search
        function filterApps() {
            const val = document.getElementById('search').value.toLowerCase();
            const cards = document.querySelectorAll('.app-card');
            if(val.length > 0) document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
            
            cards.forEach(card => {
                if(card.innerText.toLowerCase().includes(val)) card.style.display = 'flex';
                else card.style.display = 'none';
            });
        }

        // Register Service Worker
        if ('serviceWorker' in navigator) navigator.serviceWorker.register('/Qalyx/sw.js', { scope: '/Qalyx/' });
    </script>
</body>
</html>
