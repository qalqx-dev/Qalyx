<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Color | QALQX Supreme</title>
    <link rel="stylesheet" href="../../style.css">
    <script src="../../app.js" defer></script>
    <style>
        .preview-box {
            height: 150px; border-radius: 12px; margin-bottom: 20px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.5); border: 1px solid var(--border);
            font-size: 1.5rem; font-weight: bold; transition: background 0.3s;
        }
        .control-row { display: flex; gap: 10px; margin-bottom: 15px; }
        input[type="color"] { height: 50px; padding: 0; border: none; cursor: pointer; flex: 1; }
        
        .code-card {
            background: #111; padding: 15px; border-radius: 8px; margin-bottom: 10px;
            display: flex; justify-content: space-between; align-items: center;
            border-left: 3px solid var(--primary);
        }
        .code-val { font-family: monospace; color: #fff; }
        .copy-icon { cursor: pointer; color: var(--primary); font-size: 0.9rem; }
        
        .tab-btn { flex: 1; padding: 10px; background: #222; color: #888; border: 1px solid #333; }
        .tab-btn.active { background: var(--primary); color: #000; border-color: var(--primary); }
    </style>
</head>
<body>
    <div class="nav"><a href="../../index.html" class="back-btn">‚Üê</a><h2>COLOR STUDIO</h2></div>
    <div class="container">
        
        <div class="preview-box" id="preview">
            <span id="contrastText">Sample Text</span>
        </div>

        <div class="control-row">
            <button class="tab-btn active" onclick="setMode('solid')">SOLID</button>
            <button class="tab-btn" onclick="setMode('grad')">GRADIENT</button>
        </div>

        <div class="control-row">
            <input type="color" id="c1" value="#00E5FF" oninput="update()">
            <input type="color" id="c2" value="#FF0055" style="display:none;" oninput="update()">
        </div>

        <div id="outputs">
            <div class="code-card" onclick="copy('hex')">
                <span class="code-val" id="hex">#00E5FF</span>
                <span class="copy-icon">COPY</span>
            </div>
            <div class="code-card" onclick="copy('rgb')">
                <span class="code-val" id="rgb">rgb(0, 229, 255)</span>
                <span class="copy-icon">COPY</span>
            </div>
            <div class="code-card" onclick="copy('css')">
                <span class="code-val" id="css">background: #00E5FF;</span>
                <span class="copy-icon">COPY CSS</span>
            </div>
        </div>

    </div>

    <script>
        let mode = 'solid';

        function setMode(m) {
            mode = m;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            
            const c2 = document.getElementById('c2');
            if(mode === 'grad') c2.style.display = 'block';
            else c2.style.display = 'none';
            update();
        }

        function update() {
            const c1 = document.getElementById('c1').value;
            const c2 = document.getElementById('c2').value;
            const box = document.getElementById('preview');
            const txt = document.getElementById('contrastText');

            if (mode === 'solid') {
                box.style.background = c1;
                document.getElementById('hex').innerText = c1.toUpperCase();
                document.getElementById('rgb').innerText = hexToRgb(c1);
                document.getElementById('css').innerText = `background: ${c1};`;
                
                // Contrast Check
                txt.style.color = getContrastColor(c1);
            } else {
                const grad = `linear-gradient(90deg, ${c1}, ${c2})`;
                box.style.background = grad;
                document.getElementById('hex').innerText = "Gradient Mode";
                document.getElementById('rgb').innerText = "Mixed";
                document.getElementById('css').innerText = `background: ${grad};`;
                txt.style.color = "#fff";
                txt.style.textShadow = "0 0 5px #000";
            }
        }

        function hexToRgb(hex) {
            const r = parseInt(hex.substr(1,2), 16);
            const g = parseInt(hex.substr(3,2), 16);
            const b = parseInt(hex.substr(5,2), 16);
            return `rgb(${r}, ${g}, ${b})`;
        }

        function getContrastColor(hex) {
            const r = parseInt(hex.substr(1,2), 16);
            const g = parseInt(hex.substr(3,2), 16);
            const b = parseInt(hex.substr(5,2), 16);
            const yiq = ((r*299)+(g*587)+(b*114))/1000;
            return (yiq >= 128) ? '#000000' : '#ffffff';
        }

        function copy(id) {
            const txt = document.getElementById(id).innerText;
            navigator.clipboard.writeText(txt);
            alert("Copied to Clipboard!");
        }

        update();
    </script>
</body>
</html>
